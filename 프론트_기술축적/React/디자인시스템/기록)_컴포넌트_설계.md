atomic 한 컴포넌트 부터 구축해야하는 상황이 있었다. 이때 동료의 피드벡을 받으면서 좀 더 설계에 고민을 하게 됐다. 이 부분을 간단하게 글로 남겨야 겠다는 생각에 기록한다.

# 확장성에 대한 피드벡

atomic 한 컴포넌트일 수록 유연성, 확장성에 좀 더 초점이 맞춰지는 것 같다.

- Label 과 Input 은 분리하자
- Input 과 HelpText 를 분리하자
  > 이유] 여러개의 Input 의 오류를 일괄 처리하는 경우를 위해
- Icon에 대한 주입

# 웹접근성과 복잡성의 충돌

웹접근성을 어느정도 강제화 하기 위해, 컴포넌트 내부에서 로직을 통해 별 다른 설정을 하지 않더라도, default 설정 값을 넣는 경우를 만들었다.

하지만, 이런 경우 코드가 불필요하게 복잡해지고, 유연성이 떨어지는 경우가 발생했다.

## **타협점**

aria-describedby 로 특정 이유를 설명해주는 더해주는 접근성을 컴포넌트 내부에 넣었지만,

- 특정 상황에 대해서만 강제하는 aria-describedby 라는 피드벡

이 있었다. 때문에

- 컴포넌트의 유연성도 떨어지고
- 코드의 복잡성도 늘어났다

그래서 이 부분도 사용하는 개발자가 직접 지정할 수 있도록 뺐다!

```tsx
export function Button({
  children,
  variant = "primary",
  disabled = false,
  disabledReason,
  prefixIcon: PrefixIcon,
  suffixIcon: SuffixIcon,
  ...props
}: ButtonProps) {
/** 제거함!
  const generatedId = useId();
  const descriptionId =
    disabled && disabledReason ? `${generatedId}-disabled-reason` : undefined;
*/

  const variantStyles = BUTTON_STYLES[variant];
  const classNamesByVariant = clsx(
    variantStyles.base,
    variantStyles.active,
    variantStyles.disabled,
    "disabled:cursor-not-allowed"
  );

  const iconClassName = clsx(
    "w-30pxr h-30pxr shrink-0",
    "text-button-icon-primary-enabled",
    "group-enabled:group-active:text-button-icon-primary-pressed",
    "group-disabled:text-button-icon-secondary-disabled"
  );

/** 제거함!
  const ariaDescribedBy =
    props["aria-describedby"] && descriptionId
      ? `${props["aria-describedby"]} ${descriptionId}`
      : props["aria-describedby"];
*/

  return (
    <>
      <button
        {...props}
        type="button"
        disabled={disabled}
        aria-describedby={ariaDescribedBy}
        className={clsx(
          "group flex items-center justify-center gap-10pxr h-66pxr px-24pxr py-12pxr leading-[1.35em] Subtitle-S3-B",
          classNamesByVariant,
          props.className
        )}
      >
        {PrefixIcon && (
          <PrefixIcon className={iconClassName} aria-hidden="true" />
        )}
        {children}
        {SuffixIcon && (
          <SuffixIcon className={iconClassName} aria-hidden="true" />
        )}
      </button>
      {/* 스크린 리더 전용 설명 텍스트 */}
      {/* 제거함
      {disabled && disabledReason && (
        <span id={descriptionId} className="sr-only">
          {disabledReason}
        </span>
      )}
      */}
    </>
  );
}
```
